<div class="container-fluid p-4">
  <div class="row">
    <div class="col-12">
      <div class="page-title">
        <h1>Dashboard</h1>
      </div>
    </div>
  </div>
  <div class="dashboard-top-cards">

    <div class="row g-2 pb-2 mb-2">
      <div class="col-sm-12 col-md-4 col-lg-3 h-100">
        <div class="card dashboard-card">
          <div class="card-body">
            <h3 class="card-title text-muted">Portfolio</h3>
            <p class="card-text font-weight-bolder mt-1">
              <mat-spinner *ngIf="totalPortfolio.loading" [diameter]="20"></mat-spinner>
              <span *ngIf="!totalPortfolio.loading">
                <span *ngFor="let portfolio of totalPortfolio.value">
                  <p class="font-weight-bold" style="font-size: 1.5em;" *ngIf="!totalPortfolio.loading">
                    {{portfolio.currency ? (portfolio.amount | currency:portfolio.currency:'symbol-narrow') :  portfolio.amount}}
                  </p>
                </span>
              </span>
            </p>
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-4 col-lg-3 h-100">
        <div class="card dashboard-card">
          <div class="card-body">
            <h3 class="card-title text-muted m-0">Top Perfoming Asset</h3>
            <div data-v-32447316="" class="d-flex align-items-center w-100 m-0">
              <div data-v-32447316="">
                <img data-v-32447316="" alt="image" [src]="bestAsset.value?.image" style="height: 40px;">
              </div>
              <div data-v-32447316="" class="align-self-end mt-2 text-truncate" style="margin-left: 10px;">
                <p data-v-32447316="" class="card-value font-weight-bold text-truncate m-0" style="font-size: 14px;">{{bestAsset.value?.name}}</p>
                <p data-v-32447316="" class="m-0">
                  <mat-spinner *ngIf="bestAsset.loading" [diameter]="20"></mat-spinner>
                  <span class="font-weight-bolder" *ngIf="!bestAsset.loading">{{bestAsset.value?.sharePrice | currency:bestAsset.value?.currency:'symbol-narrow'}}</span>
                </p>
              </div>
            </div>
            <!-- <div class="row d-flex h-100 w-100">
              <div class="col-md-4">
                <img alt="image" [src]="bestAsset.value?.image" style="height: 40px;">
              </div>
              <div class="col-md-8">
                <p class="card-value mb-1 font-weight-bold" style="font-size: 1.2em;">{{bestAsset.value?.name}}</p>
                <p class="m-0">
                  <mat-spinner *ngIf="bestAsset.loading" [diameter]="20"></mat-spinner>
                  <span class="font-weight-bolder" *ngIf="!bestAsset.loading">{{bestAsset.value?.sharePrice | currency:bestAsset.value?.currency:'symbol-narrow'}}</span>
                </p>
              </div>
            </div> -->
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-4 col-lg-6 h-100">
        <div class="card dashboard-card buy-shares-card">
          <div class="card-body">
            <div data-v-65e651c5="" class="row no-gutters">
              <div data-v-65e651c5="" class="col-sm-12 col-md-8">
                <h3 data-v-65e651c5="" class="card-title mb-2">Buy Funds</h3>
                <p data-v-65e651c5="" class="card-content m-0">
                  Buy mutual funds, and be notified when they are avaliable for purchase.
                </p>
              </div>
              <div data-v-65e651c5="" class="col-sm-12 col-md-1 p-0">
                <div data-v-65e651c5="" class="d-block">
                  <a data-v-65e651c5="" href="dashboard/shares" class="btn btn-danger btn-sm text-decoration-none text-white mt-5" style="padding: 5px; min-width: 80px; font-size: 11px;">Buy Funds</a>
                </div>
              </div>
              <div data-v-65e651c5="" class="col-sm-12 col-md-3">
                <div data-v-65e651c5="" class="user-pose pull-right">
                  <svg data-v-65e651c5="" width="109" height="254" viewBox="0 0 109 254" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-65e651c5="" d="M30.7804 16.1167C41.0529 17.829 53.8523 14.0057 55.4572 11.5706C59.1761 17.2381 61.0658 17.0607 61.0658 17.0607V21.311L61.9055 20.4713C62.1645 19.8859 62.5757 19.3044 63.191 19.3044C66.5733 19.3044 66.8095 28.7121 61.1168 29.2559C61.0046 29.6248 60.8885 29.9693 60.77 30.2816V45.3396H47.9298V39.417C47.0665 39.654 46.2394 39.7898 45.4797 39.7898C40.4172 39.7898 31.7904 32.3455 30.8126 20.4713C30.7537 18.2308 30.7804 16.1167 30.7804 16.1167Z" fill="#FCBEB7"></path><path data-v-65e651c5="" d="M46.3661 0C55.2213 0 56.9925 4.72268 56.9925 4.72268C60.7712 4.72268 66.5564 11.6302 63.0728 19.3043L63.0548 19.3224L61.0654 21.3117V17.0615C61.0654 17.0615 59.1765 17.2388 55.4568 11.5713C53.8519 14.0056 41.0517 17.829 30.78 16.1174C30.78 16.1174 30.7533 18.2316 30.8121 20.472C30.8121 20.4744 30.8121 20.4768 30.8121 20.4791C26.9762 9.38024 34.6771 0 46.3661 0Z" fill="#311643"></path><path data-v-65e651c5="" d="M50.1732 23.7139C50.5648 23.7139 50.8818 23.3968 50.8818 23.0052V21.6821C50.8818 21.2906 50.5648 20.9735 50.1732 20.9735C49.7816 20.9735 49.4646 21.2906 49.4646 21.6821V23.0052C49.4654 23.3961 49.7824 23.7139 50.1732 23.7139Z" fill="#311643"></path><path data-v-65e651c5="" d="M37.0379 23.7139C37.4295 23.7139 37.7466 23.3968 37.7466 23.0052V21.6821C37.7466 21.2906 37.4295 20.9735 37.0379 20.9735C36.6463 20.9735 36.3293 21.2906 36.3293 21.6821V23.0052C36.3293 23.3961 36.6471 23.7139 37.0379 23.7139Z" fill="#311643"></path><path data-v-65e651c5="" d="M44.9647 31.9829C46.229 31.9829 47.0899 31.5074 47.6117 31.0742C48.2694 30.528 48.5425 29.9323 48.5542 29.9072C48.628 29.744 48.555 29.5517 48.3918 29.478C48.2286 29.4042 48.0371 29.4772 47.9625 29.6396C47.9257 29.7197 47.0279 31.6031 44.4186 31.3009C44.2404 31.2805 44.0795 31.4077 44.0583 31.5858C44.0371 31.764 44.1651 31.9248 44.3432 31.946C44.5606 31.9711 44.7678 31.9829 44.9647 31.9829Z" fill="#311643"></path><path data-v-65e651c5="" d="M54.8772 29.587C52.9425 29.587 51.374 28.0186 51.374 26.0839C51.374 24.1491 52.9425 22.5807 54.8772 22.5807C56.812 22.5807 58.3804 24.1491 58.3804 26.0839C58.3804 28.0186 56.812 29.587 54.8772 29.587Z" fill="#F49795"></path><path data-v-65e651c5="" d="M31.1775 23.1756C31.6216 25.5283 32.3656 27.6731 33.3065 29.5824C35.1593 29.4906 36.6323 27.9595 36.6323 26.0839C36.6323 24.1495 35.0644 22.5815 33.13 22.5815C32.4072 22.5815 31.7346 22.8005 31.1775 23.1756Z" fill="#F49795"></path><path data-v-65e651c5="" d="M37.0383 15.4307C39.5958 15.4307 41.7076 17.3754 41.9736 19.863C43.3642 19.2086 44.5916 19.5633 45.239 19.8607C45.5059 17.3738 47.6168 15.4307 50.1736 15.4307C52.9108 15.4307 55.1372 17.6579 55.1372 20.3943C55.1372 23.1308 52.91 25.3579 50.1736 25.3579C47.4983 25.3579 45.3112 23.2297 45.2147 20.5772C44.8035 20.3441 43.4827 19.7406 41.998 20.5811C41.8991 23.2312 39.7127 25.3579 37.039 25.3579C34.3018 25.3579 32.0755 23.1308 32.0755 20.3943C32.0755 17.6579 34.301 15.4307 37.0383 15.4307ZM50.1736 24.7089C52.553 24.7089 54.4882 22.7737 54.4882 20.3943C54.4882 18.0149 52.553 16.0797 50.1736 16.0797C47.7942 16.0797 45.859 18.0149 45.859 20.3943C45.859 22.7737 47.795 24.7089 50.1736 24.7089ZM37.0383 24.7089C39.4177 24.7089 41.3529 22.7737 41.3529 20.3943C41.3529 18.0149 39.4177 16.0797 37.0383 16.0797C34.6597 16.0797 32.7237 18.0149 32.7237 20.3943C32.7237 22.7737 34.6597 24.7089 37.0383 24.7089Z" fill="white"></path><path data-v-65e651c5="" d="M47.9309 45.3395V39.4169C50.8345 38.6188 54.14 36.664 56.6245 34.8002L47.9309 45.3395Z" fill="#F9AFAB"></path><path data-v-65e651c5="" d="M17.2371 236.592H30.8363L53.7018 136.039L77.127 236.592H90.7261L78.0553 123.782H27.8149L17.2371 236.592Z" fill="#6277D7"></path><path data-v-65e651c5="" d="M29.7563 242.059V251.67C29.7563 252.79 28.8476 253.699 27.727 253.699H0.469074C0.209318 253.699 -0.000183105 253.489 -0.000183105 253.23V251.379C-0.000183105 250.57 0.462831 249.833 1.19109 249.481L16.5606 242.06H29.7563V242.059Z" fill="#2F3D6C"></path><path data-v-65e651c5="" d="M78.6065 242.059V251.67C78.6065 252.79 79.5153 253.699 80.6359 253.699H107.893C108.152 253.699 108.362 253.489 108.362 253.23V251.379C108.362 250.57 107.899 249.833 107.171 249.481L91.8015 242.06H78.6065V242.059Z" fill="#2F3D6C"></path><path data-v-65e651c5="" d="M30.8364 236.592L29.8123 242.059H16.5608L17.2373 236.592H30.8364Z" fill="#FCBEB7"></path><path data-v-65e651c5="" d="M90.7262 236.592L91.8013 242.059H78.6063L77.1271 236.592H90.7262Z" fill="#FCBEB7"></path><path data-v-65e651c5="" d="M78.3271 126.201L27.3177 129.083L27.8152 123.782H78.0556" fill="#4A5EA3"></path><path data-v-65e651c5="" d="M31.1425 75.1635L27.8143 123.783H78.0547L74.9761 89.1378L75.6588 70.6496L78.2666 73.2487L89.8599 64.3362L83.6304 54.1845C82.09 51.6741 79.8628 49.6565 77.2127 48.3702L62.9229 41.4345L62.4003 41.181L60.7688 40.3892C60.7688 40.3892 53.312 45.283 47.9513 40.3892L45.0877 41.469L44.5054 41.688L29.3603 47.3971C26.9888 48.291 25.0582 50.074 23.9792 52.3686L17.5559 66.0321L31.1425 75.1635Z" fill="#89AEFF"></path><path data-v-65e651c5="" d="M45.0884 41.4683C47.5455 43.2128 50.4742 44.153 53.5489 44.153C56.7876 44.153 59.8662 43.1092 62.4002 41.1803L62.9229 41.4338C60.2602 43.533 56.9916 44.6725 53.5481 44.6725C50.2466 44.6725 47.106 43.6256 44.5053 41.6873L45.0884 41.4683Z" fill="white"></path><path data-v-65e651c5="" d="M77.8364 50.0261C77.8364 52.411 79.7701 54.3438 82.155 54.3438C82.6549 54.3438 83.1335 54.2591 83.5801 54.1029C82.2013 51.8868 80.2857 50.0606 78.0162 48.7901C77.8992 49.1817 77.8364 49.596 77.8364 50.0261Z" fill="#4A62D3"></path><path data-v-65e651c5="" d="M75.2272 175.161C71.6321 175.161 68.7177 172.246 68.7177 168.651C68.7177 165.056 71.6321 162.142 75.2272 162.142C78.8224 162.142 81.7368 165.056 81.7368 168.651C81.7368 172.246 78.8224 175.161 75.2272 175.161Z" fill="#4A5EA3"></path><path data-v-65e651c5="" d="M31.8005 175.161C28.2053 175.161 25.2909 172.246 25.2909 168.651C25.2909 165.056 28.2053 162.142 31.8005 162.142C35.3956 162.142 38.3101 165.056 38.3101 168.651C38.3101 172.246 35.3956 175.161 31.8005 175.161Z" fill="#4A5EA3"></path><path data-v-65e651c5="" d="M53.1421 117.345L94.058 129.02C94.7313 129.212 95.4329 128.822 95.6244 128.149L102.959 102.447C103.151 101.773 102.761 101.072 102.088 100.88L61.1718 89.2046C60.4985 89.0123 59.7969 89.4023 59.6054 90.0757L52.271 115.778C52.0788 116.451 52.4688 117.153 53.1421 117.345Z" fill="#4A5EA3"></path><path data-v-65e651c5="" d="M38.3867 73.9951H49.3702C49.7351 73.9951 50.0317 73.6992 50.0317 73.3335V52.7971C50.0317 52.4322 49.7359 52.1356 49.3702 52.1356H38.3867C38.0218 52.1356 37.7251 52.4314 37.7251 52.7971V73.3335C37.7251 73.6984 38.021 73.9951 38.3867 73.9951Z" fill="#4A5EA3"></path><path data-v-65e651c5="" d="M8.40044 87.6766L17.5578 66.0305L24.5453 70.703L34.3619 62.1004L36.3685 55.2212C36.3968 55.0015 36.5694 54.8288 36.7884 54.7998C37.7505 54.6727 38.5753 55.4833 38.4654 56.447L38.1209 59.4605L41.7637 59.9439C42.7463 60.0742 43.7453 59.9879 44.6909 59.6904L48.0803 58.6247C49.0981 58.3045 50.1803 58.8821 50.4816 59.9047L51.7898 59.6018C52.4286 59.4542 53.0682 59.8419 53.233 60.476L53.2424 60.5113C53.3837 61.0567 53.1302 61.6272 52.6311 61.8878C52.8979 62.9307 52.2787 63.9956 51.2397 64.2789L51.2099 64.2868C51.4901 65.3376 50.9714 66.437 49.9818 66.889L47.4172 68.0607C46.4527 68.5009 45.3956 68.7018 44.337 68.6438L38.5109 68.1698L18.7279 94.0269L18.724 94.0316C16.974 96.1198 13.9911 96.8379 11.4343 95.6427C8.44048 94.2403 7.09695 90.716 8.40044 87.6766Z" fill="#FCBEB7"></path><path data-v-65e651c5="" d="M23.8309 52.6858C24.2986 52.867 24.8064 52.9667 25.3376 52.9667C27.6441 52.9667 29.5142 51.0966 29.5142 48.7894C29.5142 48.3115 29.4333 47.8516 29.2858 47.424C26.9488 48.3272 25.0481 50.0968 23.9808 52.3672L23.8309 52.6858Z" fill="#4A62D3"></path><path data-v-65e651c5="" d="M23.2959 71.797L12.6954 77.5226L10.2994 83.187L23.2959 71.797Z" fill="#F9AFAB"></path><path data-v-65e651c5="" d="M78.0819 124.463L93.0889 98.3125L89.9137 97.4061L78.0819 124.463Z" fill="#2F3D6C"></path><path data-v-65e651c5="" d="M14.4172 94.7033C12.1427 94.7033 10.2988 92.8595 10.2988 90.5849C10.2988 88.3104 12.1427 86.4665 14.4172 86.4665C16.6918 86.4665 18.5356 88.3104 18.5356 90.5849C18.5356 92.8595 16.6918 94.7033 14.4172 94.7033Z" fill="#F9AFAB"></path><path data-v-65e651c5="" d="M92.6786 78.8614C92.6786 80.9873 94.1971 82.7593 96.2101 83.1493L96.9454 81.4385C97.6846 79.7207 97.5708 77.7541 96.6386 76.1328L95.7997 74.6731C93.9947 75.2099 92.6786 76.8822 92.6786 78.8614Z" fill="#F9AFAB"></path><path data-v-65e651c5="" d="M66.8874 119.727L71.9969 117.446C72.3509 117.289 72.6256 116.994 72.7574 116.63L73.4982 114.59L70.9163 115.223L70.0931 116.991C69.8161 117.586 69.1161 117.854 68.5126 117.594L69.5878 114.348C69.7887 113.832 70.1763 113.41 70.6738 113.165L76.0691 110.512L85.3763 80.3226L78.2656 73.2488L89.8589 64.3362L96.6377 76.1336C97.5692 77.7557 97.683 79.7215 96.9445 81.4393L78.1306 124.464L74.3968 124.636C73.9479 124.657 73.5241 124.43 73.2934 124.045L72.8869 123.366L70.9218 123.527C70.5012 123.561 70.0923 123.376 69.8404 123.036L69.3782 122.412L69.1027 122.485C68.3502 122.684 67.5599 122.34 67.1919 121.655L65.828 122.11C65.5203 121.161 65.9778 120.134 66.8874 119.727Z" fill="#FCBEB7"></path></svg>
                </div>
              </div>
            </div>

            <!-- <h2 class="card-title text-muted">Buy Shares <a href="/dashboard/shares" class="btn btn-primary btn-sm text-decoration-none text-white mt-5" style="padding: 5px; min-width: 80px; font-size: 11px;">Buy Funds</a></h2>
            <p class="card-text">Express interests in hunderds of Nigerian and Foreign Stocks, and be notified when they are avaliable for purchase</p> -->
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="dashboard-table">
    <div class="row">
      <div class="col-md-8">
        <div class="card dashboard-card">
          <div class="card-body">
            <h3 class="table-title text-muted">Recent Transactions <a class="pull-right text-danger" [routerLink]="['/dashboard/transactions']">See all</a></h3>
            <div class="table-responsive">
              <table mat-table [dataSource]="dataSource" fixedLayout="false" class="leaderboard-table">
                <ng-container matColumnDef="asset">
                  <th mat-header-cell *matHeaderCellDef>Asset</th>
                  <td mat-cell *matCellDef="let element">
                    <img [src]="element.asset?.image" style="height: 30px;" class="mr-1"/>
                    {{element.asset?.name}}
                  </td>
                </ng-container>

                <ng-container matColumnDef="price">
                  <th class="text-right" mat-header-cell *matHeaderCellDef>Share Price</th>
                  <td class="text-right" mat-cell *matCellDef="let element" class="{{element.asset?.sharePrice | number}}"> {{element.asset?.sharePrice | number}} </td>
                </ng-container>

                <ng-container matColumnDef="unitsExpressed">
                  <th class="text-right" mat-header-cell *matHeaderCellDef>Units</th>
                  <td class="text-right" mat-cell *matCellDef="let element"> {{element.unitsExpressed}} </td>
                </ng-container>
                <ng-container matColumnDef="unitsAlloted">
                  <th class="text-right" mat-header-cell *matHeaderCellDef>Units Alloted</th>
                  <td class="text-right" mat-cell *matCellDef="let element"> {{element.unitsAlloted}} </td>
                </ng-container>

                <ng-container matColumnDef="amount">
                  <th class="text-right" mat-header-cell *matHeaderCellDef>Total Cost</th>
                  <td class="text-right" mat-cell *matCellDef="let element"> {{element.amount | currency:element.asset.currency:'symbol-narrow'}}</td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th class="text-center" mat-header-cell *matHeaderCellDef>Status</th>
                  <td class="text-center" mat-cell *matCellDef="let element">
                    <div class="text-center transaction-badge p-1" [ngClass]="!element.paid && element.asset.openForPurchase ? 'text-danger' : !element.asset.openForPurchase? 'text-body' : 'text-warning'">
                      {{!element.paid && element.asset.openForPurchase ? "Pending Payment" : !element.asset.openForPurchase? "Not Available" : "Paid"}}
                    </div>
                  </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef>Action</th>
                  <td mat-cell *matCellDef="let element">
                    <span class="header-menu" *ngIf="!element.paid && element.asset.openForPurchase">
                      <button mat-icon-button [matMenuTriggerFor]="historylistmenu">
                        <mat-icon>more_vert</mat-icon>
                      </button>
                      <mat-menu #historylistmenu="matMenu">
                        <a href="javascript:;" (click)="onMakePayment(element)" mat-menu-item>
                          <mat-icon>drive_file_rename_outline</mat-icon> Make Payment
                        </a>
                        <a href="javascript:;" (click)="onDeleteTransaction(element)" mat-menu-item>
                          <mat-icon>delete_outline</mat-icon> Delete
                        </a>
                      </mat-menu>
                    </span>
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
            </div>
            <div *ngIf="isLoading$ | async" class="mat-spinner-container">
              <mat-spinner></mat-spinner>
            </div>
            <!-- <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator> -->
            <mat-paginator [length]="total_count" [pageSize]="pageSize"></mat-paginator>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card dashboard-card">
          <div class="card-body font-weight-bold">
            <h3 class="card-title text-muted">Trending Now <a class="pull-right text-danger" href="#">See all</a></h3>
            <div class="row p-3" *ngFor="let asset of topAssets; let i = index">
              <div class="col-md-1 text-muted p-0 m-0">{{i+1}}</div>
              <div class="col-md-6 text-muted p-0 m-0">{{asset.name}}</div>
              <div class="col-md-3 text-muted p-0 m-0">{{asset.sharePrice | currency:asset.currency:'symbol-narrow'}}</div>
              <div class="col-md-1 p-0 m-0">
                <svg width="14" height="7" viewBox="0 0 14 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M11.7425 9.00001H2.75554C2.40074 9.00049 2.05305 8.90682 1.75271 8.72985C1.45238 8.55288 1.21167 8.29983 1.05846 8.00001C0.879117 7.64427 0.810039 7.24848 0.859104 6.85774C0.908168 6.46701 1.0734 6.09704 1.33597 5.79001L5.82947 0.69001C6.00582 0.49938 6.22384 0.346494 6.46876 0.241713C6.71368 0.136931 6.97979 0.0827026 7.24904 0.0827026C7.51829 0.0827026 7.78439 0.136931 8.02931 0.241713C8.27424 0.346494 8.49226 0.49938 8.6686 0.69001L13.1621 5.79001C13.4247 6.09704 13.5899 6.46701 13.639 6.85774C13.688 7.24848 13.619 7.64427 13.4396 8.00001C13.2864 8.29983 13.0457 8.55288 12.7454 8.72985C12.445 8.90682 12.0973 9.00049 11.7425 9.00001Z" fill="#00BA88"></path>
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
