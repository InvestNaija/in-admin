<div class="container-fluid p-4">
  <div class="row">
    <div class="col-12">
      <a [routerLink]="['/dashboard/index']" class="text-dark text-decoration-none">< Back</a>
      <div class="page-title">
        <h1>Portfolio</h1>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-8">
      <div class="row mb-5">
        <div class="col-md-4">
          <div class="card">
            <div class="card-body">
                <div class="row d-flex h-100 w-100 align-items-center">
                  <div class="col-md-4">
                    <svg width="56" height="50" viewBox="0 0 56 50" fill="none" xmlns="http://www.w3.org/2000/svg" class="" style="margin-right: 10px; height: 35px;"><rect width="55.5254" height="50" rx="10" fill="#FF652F"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M33.348 13H22.1776C17.8398 13 14.9492 15.9039 14.9492 20.0718V29.9282C14.9492 34.1 17.8322 37 22.1776 37H33.348C37.6934 37 40.5763 34.1 40.5763 29.9282V20.0718C40.5763 15.9 37.6934 13 33.348 13ZM22.1755 14.6744H33.3459C36.6742 14.6744 38.7863 16.799 38.7863 20.0718V29.9282C38.7863 33.2009 36.6742 35.3255 33.3459 35.3255H22.1755C18.8473 35.3255 16.7351 33.2009 16.7351 29.9282V20.0718C16.7351 16.8034 18.8543 14.6744 22.1755 14.6744ZM28.6944 19.2148C28.6352 18.8061 28.2612 18.4911 27.8086 18.4911C27.3149 18.4911 26.9146 18.866 26.9146 19.3284V30.6505L26.9228 30.7641C26.982 31.1727 27.356 31.4877 27.8086 31.4877C28.3023 31.4877 28.7026 31.1128 28.7026 30.6505V19.3284L28.6944 19.2148ZM23.1323 22.879C23.0731 22.4704 22.699 22.1554 22.2465 22.1554C21.7527 22.1554 21.3525 22.5302 21.3525 22.9926V30.6504L21.3607 30.764C21.4198 31.1727 21.7939 31.4876 22.2465 31.4876C22.7402 31.4876 23.1404 31.1128 23.1404 30.6504V22.9926L23.1323 22.879ZM33.279 26.2021C33.7315 26.2021 34.1056 26.517 34.1648 26.9257L34.1729 27.0393V30.6505C34.1729 31.1129 33.7727 31.4877 33.279 31.4877C32.8264 31.4877 32.4524 31.1727 32.3932 30.7641L32.385 30.6505V27.0393C32.385 26.5769 32.7852 26.2021 33.279 26.2021Z" fill="white"></path></svg>
                  </div>
                  <div class="col-md-8">
                    <p class="card-value mb-1" style="font-size: 14px;">Total Portfolio Value</p>
                    <p class="m-0">
                      <mat-spinner *ngIf="totalPortfolio.loading" [diameter]="20"></mat-spinner>
                      <span class="font-weight-bolder" *ngIf="!totalPortfolio.loading">{{totalPortfolio.value | currency:'NGN':'symbol-narrow'}}</span>
                    </p>
                  </div>
                </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 h-100 w-100">
          <div class="card">
            <div class="card-body">
                <div class="row d-flex h-100 w-100 align-items-center">
                  <div class="col-md-4">
                    <svg width="52" height="50" viewBox="0 0 52 50" fill="none" xmlns="http://www.w3.org/2000/svg" class="mr-4" style="margin-right: 10px; height: 35px;"><rect width="52" height="50" rx="10" fill="#45A196"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M31.2306 13H20.7694C16.707 13 14 15.9039 14 20.0718V29.9282C14 34.1 16.6999 37 20.7694 37H31.2306C35.3001 37 38 34.1 38 29.9282V20.0718C38 15.9 35.3001 13 31.2306 13ZM20.7669 14.6744H31.228C34.345 14.6744 36.323 16.799 36.323 20.0718V29.9282C36.323 33.2009 34.345 35.3256 31.228 35.3256H20.7669C17.6499 35.3256 15.6719 33.2009 15.6719 29.9282V20.0718C15.6719 16.8034 17.6565 14.6744 20.7669 14.6744ZM26.8721 19.2147C26.8167 18.8061 26.4664 18.4911 26.0426 18.4911C25.5802 18.4911 25.2054 18.866 25.2054 19.3284V30.6505L25.213 30.7641C25.2684 31.1727 25.6187 31.4877 26.0426 31.4877C26.5049 31.4877 26.8798 31.1128 26.8798 30.6505V19.3284L26.8721 19.2147ZM21.6623 22.879C21.6069 22.4704 21.2566 22.1554 20.8327 22.1554C20.3704 22.1554 19.9955 22.5302 19.9955 22.9926V30.6504L20.0032 30.764C20.0586 31.1727 20.4089 31.4877 20.8327 31.4877C21.2951 31.4877 21.67 31.1128 21.67 30.6504V22.9926L21.6623 22.879ZM31.1653 26.2021C31.5892 26.2021 31.9395 26.517 31.9949 26.9257L32.0025 27.0393V30.6505C32.0025 31.1128 31.6277 31.4877 31.1653 31.4877C30.7415 31.4877 30.3912 31.1727 30.3358 30.7641L30.3281 30.6505V27.0393C30.3281 26.5769 30.703 26.2021 31.1653 26.2021Z" fill="white"></path></svg>
                  </div>
                  <div class="col-md-8">
                    <p class="card-value mb-1" style="font-size: 14px;">Total Asset<br>&nbsp;</p>
                    <p class="m-0">
                      <mat-spinner *ngIf="totalAsset.loading" [diameter]="20"></mat-spinner>
                      <span class="font-weight-bolder" *ngIf="!totalAsset.loading">{{totalAsset.value | number}}</span>
                    </p>
                  </div>
                </div>
            </div>
          </div>
        </div><div class="col-md-4">
          <div class="card">
            <div class="card-body">
                <div class="row d-flex h-100 w-100 align-items-center">
                  <div class="col-md-4">
                    <svg width="52" height="50" viewBox="0 0 52 50" fill="none" xmlns="http://www.w3.org/2000/svg" class="mr-4" style="margin-right: 10px; height: 35px;"><rect width="52" height="50" rx="10" fill="#27AE60"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M36.5886 34.5294C36.5886 35.3013 36.2003 35.9295 35.7203 35.9295H16.2803C15.8003 35.9295 15.4121 35.3013 15.4121 34.5294C15.4121 33.7546 15.8003 33.1264 16.2803 33.1264H35.7203C36.2003 33.1264 36.5886 33.7546 36.5886 34.5294Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M20.9843 30.6209C20.9843 31.1628 20.4675 31.607 19.8323 31.607H18.1057C17.469 31.607 16.9551 31.1628 16.9551 30.6209V25.6759C16.9551 25.1325 17.469 24.6898 18.1057 24.6898H19.8323C20.4675 24.6898 20.9843 25.1325 20.9843 25.6759V30.6209Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M27.9921 30.6223C27.9921 31.1657 27.4768 31.607 26.8415 31.607H25.1135C24.4782 31.607 23.9629 31.1657 23.9629 30.6223V24.1823C23.9629 23.6389 24.4782 23.1976 25.1135 23.1976H26.8415C27.4768 23.1976 27.9921 23.6389 27.9921 24.1823V30.6223Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M35.0891 30.5835C35.0891 31.1226 34.571 31.561 33.9258 31.561H32.1809C31.5371 31.561 31.0176 31.1226 31.0176 30.5835V21.2326C31.0176 20.6935 31.5371 20.2551 32.1809 20.2551H33.9258C34.571 20.2551 35.0891 20.6935 35.0891 21.2326V30.5835Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M16.4489 22.9489C16.1923 22.9499 15.9454 22.8497 15.7598 22.6693C15.5743 22.489 15.4645 22.2425 15.4536 21.9815C15.4496 21.8491 15.4715 21.7173 15.5178 21.5935C15.5641 21.4698 15.6341 21.3566 15.7236 21.2605C15.8131 21.1644 15.9204 21.0874 16.0393 21.0337C16.1582 20.9801 16.2864 20.9509 16.4164 20.9479C23.4809 20.6935 30.2065 17.922 34.8738 13.3392C35.0645 13.1533 35.3192 13.0509 35.5832 13.0542C35.8471 13.0574 36.0994 13.1659 36.2856 13.3565C36.377 13.4499 36.4492 13.5609 36.498 13.683C36.5468 13.8051 36.5711 13.9359 36.5697 14.0678C36.5683 14.1996 36.541 14.3298 36.4896 14.4508C36.4381 14.5718 36.3635 14.6811 36.2701 14.7724C31.1792 19.7706 24.1529 22.6744 16.4856 22.9475L16.4489 22.9489Z" fill="white"></path></svg>
                  </div>
                  <div class="col-md-8">
                    <p class="card-value mb-1" style="font-size: 14px;">Top Performing Asset</p>
                    <p class="m-0">
                      <mat-spinner *ngIf="bestAsset.loading" [diameter]="20"></mat-spinner>
                      <span class="font-weight-bolder" *ngIf="!bestAsset.loading">{{bestAsset.value | currency:'NGN':'symbol-narrow'}}</span>
                    </p>
                  </div>
                </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <div class="card">
            <div class="card-body">
              <h3 class="card-title">Recent Transactions</h3>
              <table mat-table [dataSource]="dataSource" fixedLayout="false" class="leaderboard-table">

                <ng-container matColumnDef="asset">
                  <th mat-header-cell *matHeaderCellDef>Asset</th>
                  <td mat-cell *matCellDef="let element">
                    <img [src]="element.asset?.image" style="height: 30px;" class="mr-1"/>
                    {{element.asset?.name}}
                  </td>
                </ng-container>

                <ng-container matColumnDef="price">
                  <th mat-header-cell *matHeaderCellDef>Share Price</th>
                  <td mat-cell *matCellDef="let element" class="{{element.asset?.sharePrice | number}}"> {{element.asset?.sharePrice | number}} </td>
                </ng-container>

                <ng-container matColumnDef="unitsExpressed">
                  <th mat-header-cell *matHeaderCellDef>Units</th>
                  <td mat-cell *matCellDef="let element"> {{element.unitsExpressed}} </td>
                </ng-container>
                <ng-container matColumnDef="unitsAlloted">
                  <th mat-header-cell *matHeaderCellDef>Units Alloted</th>
                  <td mat-cell *matCellDef="let element"> {{element.unitsAlloted}} </td>
                </ng-container>

                <ng-container matColumnDef="amount">
                  <th mat-header-cell *matHeaderCellDef>Total Cost</th>
                  <td mat-cell *matCellDef="let element"> {{element.amount | currency:element.asset.currency:'symbol-narrow'}}</td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef>Status</th>
                  <td mat-cell *matCellDef="let element">
                    <div class="text-center transaction-badge p-1" [ngClass]="!element.paid && element.asset.openForPurchase ? 'bg-warning text-danger' : !element.asset.openForPurchase? 'bg-secondary text-body' : 'bg-success text-warning'">
                      {{!element.paid && element.asset.openForPurchase ? "Make Payment" : !element.asset.openForPurchase? "Not Available" : "Paid"}}
                    </div>
                  </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef>Action</th>
                  <td mat-cell *matCellDef="let element">
                    <span class="header-menu" *ngIf="!element.paid && element.asset.openForPurchase">
                      <button mat-icon-button [matMenuTriggerFor]="historylistmenu">
                        <mat-icon>more_vert</mat-icon>
                      </button>
                      <mat-menu #historylistmenu="matMenu">
                        <a href="javascript:;" (click)="onMakePayment(element)" mat-menu-item>
                          <mat-icon>drive_file_rename_outline</mat-icon> Make Payment
                        </a>
                      </mat-menu>
                    </span>
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>

              <div *ngIf="isLoading$ | async" class="mat-spinner-container">
                <mat-spinner></mat-spinner>
              </div>
              <!-- <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator> -->
              <mat-paginator [length]="total_count" [pageSize]="pageSize"></mat-paginator>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
